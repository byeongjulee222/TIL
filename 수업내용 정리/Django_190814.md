[TOC]

# Django

시작 전에 파이썬 버전 변경(최상위 환경 // 알고리즘 수업할 때는 반대로)

![image](https://user-images.githubusercontent.com/52685247/62986257-a7f7d980-be75-11e9-9dc3-cf71bc2737d9.png)

3.7버전이 3.5버전 위에 위치하도록



## 1.

### 1.1 특징

- 의존성 
  - 본인의 컴퓨터에서 잘 작동하던 프로그램도, 다른 프로그램에 설치했을 때 잘 동작하리라는 보장이 없음.
  - 파이썬도 같은 버전, 같은 모듈을 쓴다는 보장이 없다.
  - 따라서, 특정 프로그램만을 실행하기 위한 파이썬 환경을 따로 만들고, 그 환경 속에서만 모듈 관리 및 앱을 실행시키기 위해 가상환경을 설정한다.
  - 다른 앱을 실행시키는 일이 생기면 그 가상환경을 빠져나와 다른 환경을 만드는 방식으로 진행한다.

### 1.2 가상환경 실행

- 윈도우에서는 작업전에 가상환경을 실행시켜야 한다.
  - 시스템이 종료되면 가상환경도 실행이 종료된다.

1. python -m venv (가상환경 경로+이름)

   ex) python -m venv ssafy

2. source venv/Scripts/activate

3. 끌 때는 deactivate



- 가상환경 맞는지 확인 : pip list



- 가상환경 선택 
  - 00_django_intro 폴더에서 open VSCode
  - Python : Select interpreter -> 3.7.3 venv 선택 -> 좌하단에 python 3.7.3 (venv) 확인





#### terminal 단축키 설정

code ~/.bashrc

alias venv="source ~/python-virtualenv/3.7.3/Scripts/activate"에서 사용했던 단축 명령어와는 다른 venv



Preferences :  Open settings (JSON)

`"terminal.integrated.cwd": "${workspaceFolder}",` 추가

(새로 업데이트 하면서 변경되었기 때문에 새로 설정)



Keyboard Shortcuts -> integrate 검색 -> Integrated Terminal 단축키 `ctrl+~`로 설정







django-admin startproject django_intro .



- 서버 키는 방법
  - python manage.py runserver (manage.py가 있는 폴더내에서)





## 2. django 기본 구조

M : Model
T : Template

V : View

- 요청 + 반응 과정

![image](https://user-images.githubusercontent.com/52685247/62988461-78e66580-be7f-11e9-93f6-c379e8697d9e.png)

`__init__.py` : 초기화해주는 파일 (만질 일 없음)

`urls.py` : url과 웹간의 연결 관리

 : 사용자의 요청을 가장 먼저 받는 곳

![image](https://user-images.githubusercontent.com/52685247/62988495-9ca9ab80-be7f-11e9-8135-9d6adda54d75.png)

### 2.1 앱 만들기

- python manage.py startapp (앱 이름) --> 폴더가 새로 만들어짐
  - 앱의 이름은 -s와 같이 복수형으로 만든다. (ex.pages)

- 안에 view.py, model.py 가 있을 것이다. (우리가 수정할 부분)





### 2.2 앱 등록하기

- settings.py -> INSTALLED_APPS
  - 이미 적혀있는 목록은 기본 내장 app
- 가장 위에 'pages.apps.PagesConfig', 추가 (폴더, 파일을 타고 들어가는 과정)
  - 끝에 `,` 붙이는거 잊지말기. 한 줄을 작성하더라도 붙이기.





### 2.3 코드 작성 순서 !!!

1. views : 만들고자하는 view 함수 작성
2. urls : views에서 만든 함수에 주소를 연결
3. templates : 해당 view 함수가 호출될 때, 보여질 페이지



#### pages.Views.py

```python
def index(request): # 첫번째 인자는 반드시 request
    return render(request, 'index.html') # render()의 첫번째 인자도 반드시 request
```



#### django_intro/urls.py (요청을 가장 먼저 받아들이는 곳)

- path('index/', views.index),
  - 사용자가 `/index`로 들어오면 views.py 안에 있는 index 함수를 사용할 것이다.

```python
from django.contrib import admin
from django.urls import path
from pages import views # 생성한 app pages 폴더 안의 views.py 파일

urlpatterns = [
    path('index/', views.index), # url 경로 마지막에 '/'를 붙이는 습관
    path('admin/', admin.site.urls),
]
```



#### pages 안에 templates 폴더 만들고 index.html 파일 만든다.





#### 실습

view 함수 이름은 introduce

introduce.html을 보여준다.



### variable routing

#####  동적 라우팅

- 주소 자체를 동적으로 변경



#### 실습

#### 1. 자기소개

introduce 확장 이름과 나이를 받아서 출력

#### 2. 숫자 2개를 받아 두 수의 곱셈 결과를 출력(times)

#### 3. 반지름 값을 받아 원의 넓이 출력(area)



### Django Template Language(DTL)

- django template에서 사용하는 내장 template system이다.
- 조건, 반복, 변수 치환, 필터 등 많은 기능을 제공한다.